(()=>{"use strict";function t(e){var i=_[e];if(void 0!==i)return i.exports;var r=_[e]={exports:{}};return A[e](r,r.exports,t),r.exports}function e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function i(t){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?e(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):e(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function r(t,e,i){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(){return s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},s.apply(null,arguments)}function n(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}function o(t){return"__private_"+ot+++"_"+t}function c(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}function h(t){return"__private_"+xt+++"_"+t}function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){l(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e,i){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function f(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(Object(i),!0).forEach((function(e){b(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function b(t,e,i){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?v(Object(i),!0).forEach((function(e){m(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function m(t,e,i){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function w(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?w(Object(i),!0).forEach((function(e){j(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function j(t,e,i){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function g(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function O(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?g(Object(i),!0).forEach((function(e){P(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function P(t,e,i){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function S(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function k(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?S(Object(i),!0).forEach((function(e){I(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function I(t,e,i){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var z,x,A=[,(t,e,i)=>{function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(t,e,i){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,{z:()=>o});class o{constructor(){this.t=[],this.i=[],this.h=!0,this.appendToMessage=void 0,this.P=[],this.S=[],this.post=t=>{this.h&&this.t.push(t),this.i.forEach((e=>{e.post(t)}))},this.on=(t,e)=>{const i=this.appendMessageDataOnCallback(e),r=this.i.map((e=>({bridge:e,sub:e.on(t,i)}))),s={creatorFn:t,callback:i,subs:r};return this.P.push(s),{unsubscribe:()=>{this.P=this.P.filter((t=>t!==s)),s.subs.forEach((t=>{t.sub.unsubscribe()}))}}},this.appendMessageDataOnCallback=t=>e=>{t(s(s({},this.appendToMessage??{}),e))},this.all=t=>{const e=this.appendMessageDataOnCallback(t),i=this.i.map((t=>({bridge:t,sub:t.all(e)}))),r={callback:e,subs:i};return this.S.push(r),{unsubscribe:()=>{this.S=this.S.filter((t=>t!==r)),i.forEach((t=>{t.sub.unsubscribe()}))}}}}destroy(){this.i.forEach((t=>{t.destroy()}))}remove(t){const e=this.i.indexOf(t);-1!==e&&(this.P=c(this.P,t),this.S=c(this.S,t),this.i.splice(e,1))}addBridge(t){this.P.forEach((e=>{e.subs.push({bridge:t,sub:t.on(e.creatorFn,e.callback)})})),this.S.forEach((e=>{e.subs.push({bridge:t,sub:t.all(e.callback)})})),this.h=!1,this.t.forEach((e=>{t.post(e)})),this.t=[],this.i.push(t)}}const c=(t,e)=>(t.forEach((t=>{t.subs.filter((t=>t.bridge===e)).forEach((t=>{t.sub.unsubscribe()})),t.subs=t.subs.filter((t=>t.bridge!==e))})),t)},(t,e,i)=>{i.d(e,{Bk:()=>c,CU:()=>l,Hi:()=>u,RS:()=>a,bL:()=>f,cV:()=>h,cd:()=>b,gj:()=>o,hm:()=>n,qj:()=>d,v8:()=>v});var r=i(3),s=i(4);const n=(0,r.x)("w-upd",(0,s.x)()),o=(0,r.x)("h-up",(0,s.x)()),c=((0,r.x)("ext-b-set",(0,s.x)()),(0,r.x)("w-query")),h=(0,r.x)("w-ready"),u=((0,r.x)("w-ready",(0,s.x)()),(0,r.x)("w-size",(0,s.x)())),a=(0,r.x)("w-dismiss"),l=(0,r.x)("w-show"),f=(0,r.x)("w-submit",(0,s.x)()),d=(0,r.x)("w-focus"),b=(0,r.x)("w-un-focus"),v=(0,r.x)("c-fcs");(0,r.x)("s-err",(0,s.x)())},(t,e,i)=>{function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(t,e,i){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e){return Object.defineProperty(e,"type",{value:t,writable:!1})}function c(t,e){if("function"==typeof e)return o(t,(function(){return s(s({},e(...arguments)),{},{type:t})}));switch(e?e._as:"empty"){case"empty":return o(t,(()=>({type:t})));case"props":return o(t,(e=>s(s({},e),{},{type:t})));default:throw new Error("Unexpected createBridgeMessage config.")}}i.d(e,{x:()=>c})},(t,e,i)=>{function r(){return{_as:"props",_p:void 0}}i.d(e,{x:()=>r})},(t,e,i)=>{i.d(e,{l:()=>r});const r=function(){}},(t,e,i)=>{i.d(e,{W:()=>n});var r=i(7);const s=t=>({destroy:()=>{(0,r.v)(t)}});class n{constructor(){var t=this;this.k=[],this.addDisposable=function(){return t.k.push(...arguments),t},this.addCleanupFn=function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return t.k.push({destroy:()=>{i.forEach((t=>{t()}))}}),t},this.addDom=function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return t.k.push(...i.map(s)),t},this.addSubscriptions=function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];var s;return t.k.push((s=i,{destroy:()=>{s.forEach((t=>{t.unsubscribe()}))}})),t},this.disposeFn=()=>{this.k.forEach((t=>{t.destroy()}))}}}},(t,e,i)=>{i.d(e,{v:()=>r});const r=t=>{t?.parentElement&&t.parentElement.removeChild(t)}},(t,e,i)=>{i.d(e,{D:()=>r});const r=()=>(new Date).getTime().toString(36)+"-"+Math.random().toString(36).split(".")[1]},(t,e,i)=>{function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(t,e,i){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,{A:()=>y});var o=i(10),c=i(12),h=i(17);class u{constructor(t,e,i,r){if(void 0===r&&(r=(0,c.D)(o.y.default.win)),this.listenTo=t,this.postTo=e,this.instanceId=i,this.subs=[],this.errWrapper=void 0,this.errWrapper=(0,h._)(r),!t||!e)throw new Error("invalid window arg:"+JSON.stringify([t,e]));if(!i)throw new Error("instance id is required")}all(t){const e=this.errWrapper(t),i=t=>{const i=t.data,r=i?.iid,s=i?.type;s&&r===this.instanceId&&e(t.data)};this.listenTo.addEventListener("message",i);const r={unsubscribe:()=>{this.listenTo.removeEventListener("message",i)}};return this.subs.push(r),r}on(t,e){const i=this.errWrapper(e),r=e=>{const r=e.data,s=r?.type,n=r?.iid;s&&s===t.type&&n===this.instanceId&&i(e.data)};this.listenTo.addEventListener("message",r);const s={unsubscribe:()=>{this.listenTo.removeEventListener("message",r)}};return this.subs.push(s),s}post(t){const e=s(s({},t),{},{iid:this.instanceId});this.postTo.postMessage(e,"*");try{this.postTo.ReactNativeWebView?.postMessage(JSON.stringify(e))}catch{}}destroy(){this.subs.forEach((t=>{t.unsubscribe()}))}}var a=i(2),l=i(1),f=i(19),d=i(8);const b=f.I.compressCss` @keyframes p{from{transform:translate(-1em,-1em)rotateZ(0deg);}to{transform:translate(-1em,-1em)rotateZ(360deg);}}@keyframes delayedFadeIn{0%{opacity:0;}75%{opacity:0;}100%{opacity:1;}}body{background-color:#fff;}#loader{position:fixed;width:2em;height:2em;box-sizing:border-box;border-radius:50%;border:2px solid #222;border-left-color:transparent;transform-origin:center center;animation:p 0.7s linear infinite,delayedFadeIn 1s linear;top:50%;left:50%;}`,v=t=>{let{content:e,id:i,domTag:r}=t;return`<${r} id="${i}">${e??""}</${r}>`};var p=i(7),m=i(11),w=i(20);const y=function(t,e){let{iid:i,build:r,loader:s,title:n,flags:h}=t;void 0===e&&(e=o.y.default);const f=!0===e.win[w.SD],y=e.doc.createElement("iframe");(0,m.Sz)(y,"_f"),y.frameBorder="0",y.onerror=(t,i,r,s,n)=>{(0,c.D)(e.win).report(n)},n&&(y.title=n),y.width="100%",y.height="100%";const j=new l.z,g=()=>{if(y.removeEventListener("load",g),f)y.src=`${(t=>"light"===t?"https://w.appzi.io/l-v2424-i4mdkl.html":"https://w.appzi.io/h-v2424-i4mdkl.html")(r)}?iid=${i}&origin=${encodeURIComponent(e.win.location.origin)}`;else{const t=(t=>{let{iid:e,loader:i,flags:r,build:s}=t;const n=(0,d.D)(),o=v({id:n,domTag:"div"}),c=i?v({domTag:"style",content:b,id:"loader-s"}):"",h=i?v({id:"loader",domTag:"div"}):"",u={iid:e,root:n,origin:(window.location.href||"").split("?")[0],flags:r},a=`<div style="display:none" id="eeque2x">${JSON.stringify(u)}</div>`,l=`<script async src="${(t=>{switch(t){case"heavy":return"https://w.appzi.io/h-v2424-i4mdkl.js";case"light":return"https://w.appzi.io/l-v2424-i4mdkl.js";case"fpe":return"https://w.appzi.io/fpe-v2424-i4mdkl.js"}})(s)}"><\/script>`;return'<html><head><meta name="viewport" content="width=device-width, initial-scale=1" /><meta charset="utf-8" />'+c+"</head><body>"+(h+o+a+l)+"</body></html>"})({title:n,build:r,iid:i,loader:s,flags:h});((t,e)=>{if("srcdoc"in t)t.srcdoc=e;else{const i=t;i.contentWindow.document.open(),i.contentWindow.document.write(e),i.contentWindow.document.close()}})(y,t)}j.addBridge(new u(e.win,y.contentWindow,i)),j.post((0,a.Bk)())};return y.addEventListener("load",g),{iframe:y,bridge:j,destroy:()=>{j.destroy(),(0,p.v)(y)}}}},(t,e,i)=>{i.d(e,{y:()=>o});var r=i(5),s=i(11),n=i(7);class o{get doc(){return document}get win(){return window}applyStyle(t,e){if(!t)return(0,n.v)(e?this.doc.getElementById(e):void 0),{cleanup:r.l};const i=(e&&this.doc.getElementById(e))??((t,e)=>{const i=t.createElement("style");return(0,s.Sz)(i,"style"),e&&(i.id=e),t.head.appendChild(i),i})(document,e);return i.innerHTML=t,{cleanup:()=>{(0,n.v)(i)}}}}o.default=new o},(t,e,i)=>{i.d(e,{Rs:()=>r,Sz:()=>n,xt:()=>s});const r="data-appzi-dom",s="appzi-screenshot-exclude",n=(t,e)=>{t.setAttribute(r,e)}},(t,e,i)=>{i.d(e,{D:()=>o}),i(13);var r=i(14),s=i(16);let n;const o=t=>(n||(n=(t=>{{const e=new s.Y({apiKey:"AIzaSyA03hoziQ7XwPWKI_zJr3BVkTiWd82ui-4",version:"v24.2.4",projectId:"appzi-prod"},t);return new r.A(e,t)}})(t)),n)},(t,e,i)=>{i.d(e,{L:()=>r});class r{constructor(){this.report=()=>Promise.resolve()}}},(t,e,i)=>{i.d(e,{A:()=>n});var r=i(15);const s=t=>{const e=(0,r.E)(t);if(e)return e;const i=t.location;return[i.protocol,"//",i.host,i.pathname].join("")};class n{constructor(t,e){this.sd=t,this.win=e}report(t){return t?this.sd.report(t,{httpRequest:{url:s(this.win),userAgent:this.win.navigator.userAgent}}):Promise.resolve()}}},(t,e,i)=>{i.d(e,{E:()=>r});const r=t=>t.chohP1r},(t,e,i)=>{function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(t,e,i){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,{Y:()=>c});const o=(t,e,i)=>{const r=new i.XMLHttpRequest;return r.open("POST",t,!0),r.setRequestHeader("Content-Type","application/json; charset=UTF-8"),new Promise(((t,i)=>{r.onreadystatechange=()=>{if(4===r.readyState){const s=r.status;s>=200&&s<300?t({message:e.message}):i(new Error((s?s+" http response":"network error")+" on stackdriver report"))}},r.send(JSON.stringify(e))}))};class c{constructor(t,e){let{apiKey:i,projectId:r,version:s}=t;this.win=e,this.reportEndpoint=void 0,this.version=void 0,this.version=s,this.reportEndpoint=`https://clouderrorreporting.googleapis.com/v1beta1/projects/${r}/events:report?key=${i}`}report(t,e,i){void 0===i&&(i=o);const r=(t=>(t.stack||t.message||t).toString())(t),n={message:r,serviceContext:{service:"appzi-widget",version:this.version},context:s(s({},e),{},{reportLocation:{filePath:"main.js",lineNumber:0,functionName:"fn"}})};return i(this.reportEndpoint,n,this.win)}}},(t,e,i)=>{function r(t,e){if(t.$)return t;const i=function(){try{return t.apply(this,arguments)}catch(i){throw e.report(i),i}};Object.defineProperties(i,{$:{enumerable:!1,value:!0}});try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get:()=>t.name})}catch{}return i}i.d(e,{Ks:()=>r,_:()=>h,cK:()=>c});var s=i(18),n=i(10),o=i(12);const c=(t,e,i)=>{const n=t,o=i??Object.keys(t);for(const c of o)try{n[c]&&"function"===(0,s.O)(n[c])&&(n[c]=r(n[c],e))}catch{}return t},h=function(t){return void 0===t&&(t=(0,o.D)(n.y.default.win)),e=>r(e,t)}},(t,e,i)=>{i.d(e,{O:()=>r});const r=t=>Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},(t,e,i)=>{i.d(e,{I:()=>r});const r={compressCss:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return String.raw(t,...i)}}},(t,e,i)=>{i.d(e,{RF:()=>s,SD:()=>n,et:()=>r});const r="Cohchie9",s="Iem8uxah",n="Phoh4foh"},(t,e,i)=>{i.d(e,{Cw:()=>s,RY:()=>r,r9:()=>n});const r="wf",s="ls",n="lf"},(t,e,i)=>{i.d(e,{l:()=>r});const r="6abd-42aa"},(t,e,i)=>{i.d(e,{p4:()=>r,uK:()=>s});const r={unsubscribe:()=>{}},s=()=>{const t=[];return{next:e=>{t.forEach((t=>{t(e)}))},subscribe:e=>(t.push(e),{unsubscribe:()=>{const i=t.indexOf(e);-1!==i&&t.splice(i,1)}})}}},(t,e,i)=>{i.d(e,{$Z:()=>r,M6:()=>s});const r=2147483003,s=2147483004},(t,e,i)=>{i.d(e,{H:()=>r,C:()=>s});const r=(t,e)=>{if(t._t!==e)throw new Error(`unexpected _t[${t._t}] expected [${e}]`);return t},s=(t,e)=>(r(t.host,e),t)}],_={};t.m=A,t.d=(e,i)=>{for(var r in i)t.o(i,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce(((i,r)=>(t.f[r](e,i),i)),[])),t.u=t=>"lazy-v2424-i4mdkl-"+t+".js",t.miniCssF=t=>t+"-"+{41:"aff72adb1c6d4acda43e",42:"1ecd313f932a4b7921b1",43:"a0ab47c5d99ed904b97f"}[t]+"-v2424-i4mdkl.css",t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),z={},x="appzi-widget:",t.l=(e,i,r)=>{if(z[e])z[e].push(i);else{var s,n;if(void 0!==r)for(var o=document.getElementsByTagName("script"),c=0;c<o.length;c++){var h=o[c];if(h.getAttribute("src")==e||h.getAttribute("data-webpack")==x+r){s=h;break}}s||(n=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,t.nc&&s.setAttribute("nonce",t.nc),s.setAttribute("data-webpack",x+r),s.src=e,0!==s.src.indexOf(window.location.origin+"/")&&(s.crossOrigin="anonymous")),z[e]=[i];var u=(t,i)=>{s.onerror=s.onload=null,clearTimeout(a);var r=z[e];if(delete z[e],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((t=>t(i))),t)return t(i)},a=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),n&&document.head.appendChild(s)}},t.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.p="https://w.appzi.io/",(()=>{if("undefined"!=typeof document){var e={31:0};t.f.miniCss=(i,r)=>{e[i]?r.push(e[i]):0!==e[i]&&{41:1,42:1,43:1}[i]&&r.push(e[i]=(e=>new Promise(((i,r)=>{var s=t.miniCssF(e),n=t.p+s;if(((t,e)=>{for(var i=document.getElementsByTagName("link"),r=0;r<i.length;r++){var s=(o=i[r]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(s===t||s===e))return o}var n=document.getElementsByTagName("style");for(r=0;r<n.length;r++){var o;if((s=(o=n[r]).getAttribute("data-href"))===t||s===e)return o}})(s,n))return i();((e,i,r,s,n)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",t.nc&&(o.nonce=t.nc),o.onerror=o.onload=t=>{if(o.onerror=o.onload=null,"load"===t.type)s();else{var r=t&&t.type,c=t&&t.target&&t.target.href||i,h=new Error("Loading CSS chunk "+e+" failed.\n("+r+": "+c+")");h.name="ChunkLoadError",h.code="CSS_CHUNK_LOAD_FAILED",h.type=r,h.request=c,o.parentNode&&o.parentNode.removeChild(o),n(h)}},o.href=i,0!==o.href.indexOf(window.location.origin+"/")&&(o.crossOrigin="anonymous"),document.head.appendChild(o)})(e,n,0,i,r)})))(i).then((()=>{e[i]=0}),(t=>{throw delete e[i],t})))}}})(),(()=>{var e={31:0};t.f.j=(i,r)=>{var s=t.o(e,i)?e[i]:void 0;if(0!==s)if(s)r.push(s[2]);else{var n=new Promise(((t,r)=>s=e[i]=[t,r]));r.push(s[2]=n);var o=t.p+t.u(i),c=new Error;t.l(o,(r=>{if(t.o(e,i)&&(0!==(s=e[i])&&(e[i]=void 0),s)){var n=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;c.message="Loading chunk "+i+" failed.\n("+n+": "+o+")",c.name="ChunkLoadError",c.type=n,c.request=o,s[1](c)}}),"chunk-"+i,i)}};var i=(i,r)=>{var s,n,[o,c,h]=r,u=0;if(o.some((t=>0!==e[t]))){for(s in c)t.o(c,s)&&(t.m[s]=c[s]);h&&h(t)}for(i&&i(r);u<o.length;u++)t.o(e,n=o[u])&&e[n]&&e[n][0](),e[n]=0},r=self.webpackChunkappzi_widget=self.webpackChunkappzi_widget||[];r.forEach(i.bind(null,0)),r.push=i.bind(null,r.push.bind(r))})();var E=t(1);const $="sw";var T=t(2),C=t(5);class L{constructor(t){this.styledElement=t}apply(t){this.styledElement.style.transition="height 0.3s ease-out",this.styledElement.style.overflow="hidden",this.styledElement.style.width="100%",t.borderRadius&&(this.styledElement.style.borderRadius=t.borderRadius.map((t=>t+"px")).join(" ")),t.height&&(this.styledElement.style.height=`${t.height}px`),t.width&&(this.styledElement.style.maxWidth=`${t.width}px`)}}var D=t(6);class R{constructor(t,e){this._t=void 0,this.destroy=void 0,this.T=void 0,this.bridge=void 0,this.domElement=void 0,this.push=t=>{this.bridge.post((0,T.hm)({widget:t})),this.T.apply(t.host)},this.show=C.l,this.hide=C.l;const r=t.host,s=e();this.domElement=s.domElement,this.T=new L(this.domElement),this.T.apply(r),this.bridge=s.frame.bridge;const n=this.bridge.on(T.Hi,(t=>{const{height:e}=t;this.T.apply(i(i({},r),{},{height:e}))}));this.destroy=(new D.W).addDisposable(s).addSubscriptions(n).disposeFn}}var F=t(8),N=t(9);class W{constructor(t,e,i,r){void 0===r&&(r=(0,F.D)()),this.bw=t,this.bridge=void 0,this.domElement=void 0,this.F=void 0,this.show=C.l,this.hide=C.l;const{bridge:s,iframe:n,destroy:o}=(0,N.A)({title:i.title,build:i.build,iid:r,loader:i.loader,flags:i.flags},this.bw);this.domElement=n,this.bridge=s;const c=this.bridge.on(T.cV,(t=>{t.iid===r&&(this.bridge.post((0,T.hm)({widget:e})),c.unsubscribe())}));this.F=(new D.W).addSubscriptions(c).addCleanupFn(o).disposeFn}push(t){this.bridge.post((0,T.hm)({widget:t}))}destroy(){this.F()}}const M=t=>{const e=t??{};return{build:e.build??"heavy",loader:!!e.loader,flags:e.flags}};var J=t(11);const B=(t,e,i)=>{const r=M(i);return new R(e,(()=>((t,e)=>{let{instanceId:i,bw:r,widget:s,markAsAppzi:n,opts:o}=e;t.id="appzi-i-"+i,n(t,"feedback-frame");const c=new W(r,s,o);return t.appendChild(c.domElement),{domElement:t,frame:c,destroy:()=>{c.destroy()}}})(t.doc.createElement("div"),{instanceId:(0,F.D)(),bw:t,widget:e,markAsAppzi:J.Sz,opts:r})))};var H=t(21);const q=(t,e)=>{t.style.display="none";const i=new U(t);return e().then((e=>{i.attachRealHost(e),t.style.display=""})),i};var K=function(t){return t.doNothing="n",t.show="s",t.hide="h",t}(K||{});class U{constructor(t){this.domElement=t,this.M=!1,this.J=void 0,this.N=void 0,this.B=K.doNothing,this.bridge=new E.z,this.attachRealHost=t=>{if(this.M)t.destroy();else switch(this.J=t,this.bridge.addBridge(t.bridge),this.N&&this.push(this.N),this.B){case K.show:this.show();break;case K.hide:this.hide()}},this.destroy=()=>{this.M=!0,this.J?.destroy()},this.show=()=>{this.B=K.show,this.J?.show()},this.hide=()=>{this.B=K.hide,this.J?.hide()},this.push=t=>{this.J?(this.J.push(t),delete this.N):this.N=t}}}const V=(e,i,r)=>{const{_t:s}=i.host;if(s!==H.RY)throw new Error("unsupported host:"+s);const n=e.doc.createElement("div");return q(n,(()=>new Promise((function(s,o){let c,h,u,a,l;return Promise.resolve(new Promise((function(e,i){let r,s,n;return Promise.resolve(t.e(41).then(t.bind(t,134))).then((function(t){try{return({FloatingWidgetHostController:r,buildFloatingWidgetAppziDom:s,createFloatingWidgetLayoutService:n}=t),e({FloatingWidgetHostController:r,buildFloatingWidgetAppziDom:s,createFloatingWidgetLayoutService:n})}catch(o){return i(o)}}),i)}))).then((function(t){try{return({FloatingWidgetHostController:c,buildFloatingWidgetAppziDom:h,createFloatingWidgetLayoutService:u}=t),a=h(n,{instanceId:(0,F.D)(),bw:e,markAsAppzi:J.Sz,heavyFlags:r}),l=u(e,a.bridge,i.host),s(new c(e,i,a,l))}catch(f){return o(f)}}),o)}))))},Z=(e,i,r)=>{const{_t:s}=i.host,n=e.doc.createElement("button");switch(s){case H.Cw:return q(n,(()=>new Promise((function(s,o){let c,h;return Promise.resolve(new Promise((function(e,i){let r,s;return Promise.resolve(t.e(42).then(t.bind(t,136))).then((function(t){try{return({StickyLauncherHostController:r,buildStickyLauncherAppziDom:s}=t),e({StickyLauncherHostController:r,buildStickyLauncherAppziDom:s})}catch(n){return i(n)}}),i)}))).then((function(t){try{return({StickyLauncherHostController:c,buildStickyLauncherAppziDom:h}=t),s(new c(i,r?.positioning??"window-relative",(()=>h(n,{instanceId:(0,F.D)(),markAsAppzi:J.Sz,bw:e,flags:r}))))}catch(u){return o(u)}}),o)}))));case H.r9:return q(n,(()=>new Promise((function(s,o){let c;return Promise.resolve(new Promise((function(e,i){let r;return Promise.resolve(t.e(43).then(t.bind(t,138))).then((function(t){try{return({FloatingLauncherHostController:r}=t),e(r)}catch(s){return i(s)}}),i)}))).then((function(t){try{return c=t,s(new c(e,i,n,r))}catch(h){return o(h)}}),o)}))));default:throw new Error("unsupported host:"+s)}};var Y=t(22);const G=t=>{const{doc:e,win:i}=t,r=i[Y.l]??{isLocked:!1},s=r.isLocked?{x:r.left,y:r.top}:{x:0,y:0};return{width:i.innerWidth||e.documentElement.clientWidth||e.body.clientWidth,height:i.innerHeight||e.documentElement.clientHeight||e.body.clientHeight,x:s.x||(i.scrollX||e.documentElement.scrollLeft)-(e.documentElement.clientLeft||0),y:s.y||(i.scrollY||e.documentElement.scrollTop)-(e.documentElement.clientTop||0)}};var Q=t(23),X=t(24),tt=t(7);const et=()=>({hide:C.l,show:C.l,onClick:C.l,destroy:C.l});var it=t(25);class rt{constructor(t,e,i,r){this.bw=t,this.K=e,this.R=i,this.q=r,this.U=void 0,this.Z=et(),this.V=void 0,this.bridge=new E.z,this.X=C.l,this.G=void 0,this.tt=void 0,this.state$=(0,Q.uK)(),this.rt=t=>{this.tt!==t&&(this.tt=t,this.state$.next({isOpen:t}))},this.show=()=>{this.rt(!0),this.V&&(this.G=G(this.bw),this.U||this.it(),this.U.show(),this.Z.show())},this.hide=()=>{this.rt(!1),this.U?.hide(),this.Z.hide()},this.nt=()=>{this.bridge.post((0,T.RS)())},this.it=()=>{const{id:t}=this.V,e=this.V.widget,i=this.q((0,it.C)(e,H.RY));this.U=i,this.bridge.addBridge(this.U.bridge),this.bw.doc.body.appendChild(this.U.domElement),this.U.bridge.on(T.bL,(e=>{this.K.submit({configId:t,payload:e.payload,screenshot:this.R.screenshot?this.R.screenshotRenderingStrategy:"none",screenMeta:this.G})})),this.U.bridge.on(T.RS,this.hide),this.U.push(e)}}destroy(){this.bridge.destroy(),this.U?.destroy(),this.Z.destroy(),this.X()}push(t){this.V=t;const e=this.V.widget,i=e.host.backdrop,r=!!i,n=!0===i?[0,0,0,.5]:i;this.Z.destroy(),this.Z=r?function(t,e,i){void 0===i&&(i=J.Sz);const r=t.doc.createElement("div");var n;return i(r,"backdrop"),s(r.style,{backgroundColor:(n=e,`rgba(${n.join(",")})`),position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:String(X.$Z),opacity:"0",pointerEvents:"none"}),t.doc.body.appendChild(r),{hide:()=>{r.style.opacity="0",r.style.pointerEvents="none"},show:()=>{r.style.opacity="1",r.style.pointerEvents="auto"},onClick:t=>{r.addEventListener("click",t)},destroy:()=>{(0,tt.v)(r)}}}(this.bw,n):et(),this.Z.onClick(this.nt),this.U&&this.U.push((0,it.C)(e,"wf")),this.tt&&this.show()}}class st{constructor(t,e){this.st=t,this.ot=e,this.state$=void 0,this.bridge=new E.z,this.destroy=void 0,this.show=()=>{this.ot.hide(),this.st.show()},this.hide=()=>{this.ot.show(),this.st.hide()},this.bridge.addBridge(this.st.bridge),this.state$=this.st.state$,this.bridge.addBridge(this.ot.bridge),this.ot.bridge.on(T.RS,(()=>{this.show()}));const i=t=>{"Enter"!==t.key&&" "!==t.key||(t.stopPropagation(),this.show())};this.ot.domElement.addEventListener("keydown",i);const r=this.state$.subscribe((t=>{let{isOpen:e}=t;e?this.show():this.hide()}));this.destroy=(new D.W).addDisposable(this.bridge,this.st,this.ot).addSubscriptions(r).addCleanupFn((()=>{this.ot.domElement.removeEventListener("keydown",i)})).disposeFn}push(t){this.ot.push(t.launcher),this.st.push(t)}}const nt=(t,e,i)=>{const r=e.privacy?.screenShot??{},s=new rt(t,i.submitService,{screenshot:r.isEnabled,screenshotRenderingStrategy:r.renderer},(e=>V(t,e,i.heavy))),n=e.launcher;if(!n)return s;const o=Z(t,n,i.light);return t.doc.body.appendChild(o.domElement),new st(s,o)};var ot=0,ct=o("hosts");class ht{constructor(t,e,i){void 0===i&&(i=nt),this.bw=t,this.ct=e,this.ht=i,this.v="v24.2.4",Object.defineProperty(this,ct,{writable:!0,value:{}}),this.hosts$=(0,Q.uK)(),this.bridge=new E.z,this.create=(t,e)=>{const i=t;if(!n(this,ct)[ct][i.id]){const t=e??{},r={},s={editMode:t.flags?.editMode};n(this,ct)[ct][i.id]=this.ht(this.bw,i,{heavy:r,light:s,submitService:t.submitService??this.ct}),this.bridge.addBridge(n(this,ct)[ct][i.id].bridge)}const r=n(this,ct)[ct][i.id];return this.hosts$.next(r),r.push(i),r},this.wi=(t,e)=>{const i=((t,e,i)=>{const r=M(i);return new W(t,e,r)})(this.bw,t,e);return this.hosts$.next(i),i},this.bf=N.A,this.wia=(t,e)=>{const i=B(this.bw,t,e);return this.hosts$.next(i),i},this.wh=(t,e)=>{const i=((t,e,i)=>{switch(e.host._t){case"i":return B(t,e,M({flags:i}));case"wf":return V(t,e,i);case"lf":case"ls":return Z(t,e,i);default:throw new Error("unsupported host:"+e.host._t)}})(this.bw,t,e);return this.hosts$.next(i),i},this.get=t=>n(this,ct)[ct][t],this.destroy=t=>{const e=this.get(t);e&&(e.destroy(),this.bridge.remove(e.bridge),delete n(this,ct)[ct][t])},this.submit=this.ct.submit.bind(this.ct),this.openSurvey=t=>{this[$].open(t)},this.openWidget=this.openSurvey,this.dismissWidget=t=>{this.get(t)?.hide()},this.ut={show:()=>this.lt=!0,destroy:()=>this.lt=!1,hide:()=>this.lt=!1},this.dt=!1,this.lt=!1,this.ft=()=>{this.dt=!0;const t=this.bw.doc.createElement("script");t.src="https://w.appzi.io/sp-v2424-i4mdkl.js",t.async=!0,this.bw.doc.head.appendChild(t)},this.s=t=>{this.ut.show=t.show,this.ut.hide=t.hide,this.ut.destroy=t.destroy,this.lt&&t.show()},this.scratchPad=()=>(this.dt||this.ft(),this.ut),this[$]={open:t=>{this.get(t)?.show()}}}}var ut=t(12),at=t(17);const lt={},ft=t=>({settings:()=>t.appziSettings??lt}),dt=t=>t,bt="auto",vt=t=>{const{debug:e,nodes:i,beforeMultipartJoin:r,type:s}=t.settings().render??{};return{type:s??bt,debug:!!e,nodes:i??[],beforeMultipartJoin:r??dt}};var pt=t(18);const mt=t=>{let{x:e,y:i,width:r,height:s}=t;return{x:e,y:i,height:s,width:r}},wt=(t,e,i)=>{const r=t.createElement("a");r.download=i,r.href=e,r.click()};let yt;const jt=e=>new Promise((i=>new Promise((function(r,s){function n(){return Promise.resolve(yt(e).then(i)).then((function(){try{return r()}catch(t){return s(t)}}),s)}if(!yt){let e;return Promise.resolve(Promise.all([t.e(40),t.e(39)]).then(t.bind(t,139))).then(function(t){try{return e=t,yt=e.renderMultipleNodes,n.call(this)}catch(i){return s(i)}}.bind(this),s)}return n.call(this)}))));class gt{constructor(t,e,i){void 0===i&&(i=jt),this.bw=t,this.sp=e,this.render=i,this.renderAndAttachScreenshot=(t,e,i)=>new Promise(function(r,s){let n,o,c,h,u,a,l,f,d,b,v,p,m,w,y;return({doc:n}=this.bw),Promise.resolve(this.render(e)).then(function(j){try{return o=j,o.success?(({beforeMultipartJoin:c,debug:h}=vt(this.sp)),u=o.blobs,a=c,Promise.resolve((g=a(u),g.then?g:Promise.resolve(g))).then(function(o){try{{var c,u;function j(){var[t,e,i,r]=u();return g.bind(this,t,e,i,r)}function g(t,e,i,r){return u=function(){return[t,e,i,r]},!(r[1]=r[0].next()).done&&(({removeBg:t,position:e,imgSrc:i}=r[1].value),1)?(w++,Promise.resolve(function(t,e,i,r){let{x:s,y:n}=void 0===r?{}:r;return new Promise((r=>{const o=t.createElement("img");o.addEventListener("load",(()=>{e.drawImage(o,s??0,n??0),r()})),o.src=i}))}(n,m,i,e&&{x:e.x,y:e.y})).then((function(){try{return t&&function(t,e,i){let{x:r,y:s,width:n,height:o}=e;void 0===i&&(i=15);const c=t.getImageData(r,s,n,o),h=c.data;for(let u=0,a=h.length;u<a;u+=4)h[u]>255-i&&h[u+1]>255-i&&h[u+2]>255-i&&h[u+3]>255-i&&(h[u]=0,h[u+1]=0,h[u+2]=0,h[u+3]=0);t.putImageData(c,0,0)}(m,{x:0,y:0,width:f,height:d}),v.drawImage(p,0,0),h&&(wt(n,p.toDataURL("image/png"),w+"-tmp.png"),wt(n,b.toDataURL("image/png"),w+"-merged.png")),j}catch(e){return s(e)}}),s)):[1]}return l=o,({width:f,height:d}=e.canvas),b=n.createElement("canvas"),b.width=f,b.height=d,v=b.getContext("2d"),v.fillStyle="#fff",v.fillRect(0,0,f,d),p=n.createElement("canvas"),p.width=f,p.height=d,m=p.getContext("2d"),w=0,(c=function(t){for(;t;){if(t.then)return void t.then(c,s);try{if(t.pop){if(t.length)return t.pop()?O.call(this):t;t=j}else t=t.call(this)}catch(e){return s(e)}}}.bind(this))(g.bind(this,void 0,void 0,void 0,[l[Symbol.iterator]()]));function O(){return y=b.toDataURL("image/png"),Promise.resolve(this.bw.win.fetch(i+"/collect/"+t+"/blob-shot",{method:"post",body:y})).then((function(){try{return r()}catch(t){return s(t)}}),s)}}}catch(a){return s(a)}}.bind(this),s)):r()}catch(O){return s(O)}var g}.bind(this),s)}.bind(this))}}let Ot;const Pt=e=>new Promise((i=>new Promise((function(r,s){function n(){return Promise.resolve(Ot(e).then(i)).then((function(){try{return r()}catch(t){return s(t)}}),s)}if(!Ot){let e;return Promise.resolve(Promise.all([t.e(40),t.e(39)]).then(t.bind(t,139))).then(function(t){try{return e=t,Ot=e.renderOneNode,n.call(this)}catch(i){return s(i)}}.bind(this),s)}return n.call(this)}))));class St{constructor(t){this.win=t,this.renderAndAttachScreenshot=(t,e,i)=>new Promise(function(r,s){let n,o;return Promise.resolve(Pt(e)).then(function(e){try{return({success:n,blob:o}=e),n?Promise.resolve(this.win.fetch(i+"/collect/"+t+"/blob-shot",{method:"post",body:o})).then((function(){try{return r()}catch(t){return s(t)}}),s):r()}catch(c){return s(c)}}.bind(this),s)}.bind(this))}}class kt{constructor(t){this.win=t,this.renderAndAttachScreenshot=(t,e,i)=>{let{node:r}=e;const s=this.win.document.createElement("style");try{const t=It(this.win.document);s.innerHTML=t,r.appendChild(s)}catch(o){}const n=this.win.fetch(i+"/collect/"+t+"/html-shot",{method:"post",body:r.outerHTML});return(0,tt.v)(s),n}}}const It=t=>Array.from(t.querySelectorAll('style[data-styled="active"]')).map((t=>t.sheet)).filter(Boolean).flat().map((t=>t.cssRules)).map((t=>Object.values(t))).flat().map((t=>t.cssText)).join("\n"),zt=t=>{const{protocol:e,hostname:i}=t.win.location,r="localhost"===(i||"localhost").toLocaleLowerCase(),s=0!==e.toLocaleLowerCase().indexOf("http");return r||s?"client":"server"};var xt=0,At=h("renderers");class _t{constructor(t,e,i){this.bw=t,this.sp=e,Object.defineProperty(this,At,{writable:!0,value:void 0}),this.renderAndAttachScreenshot=(t,e,i)=>{const r=((t,e)=>{const i=vt(this.sp).type;return i!==bt?i:e??bt})(0,e.strategy),s=((t,e,i)=>{let{screen:r,strategy:s}=i;if("client-multipart"===s){const i=((t,e)=>{const i=vt(e).nodes;return("array"===(0,pt.O)(i)?i.map((e=>t.querySelectorAll(e))).reduce(((t,e)=>t.concat(...e)),[]):i()).filter(Boolean)})(t,e);return{nodes:i.length?i.map((t=>({node:t,meta:mt(t.getBoundingClientRect())}))):[{meta:r,node:t.documentElement}],renderStrategy:"client-multipart",canvas:r}}return{meta:r,node:t.documentElement,renderStrategy:s}})(this.bw.doc,this.sp,{screen:e.screen,strategy:r});return c(this,At)[At][r].renderAndAttachScreenshot(t,s,i)},c(this,At)[At]=i??((t,e)=>{const i=new kt(t.win),r=new St(t.win),s=new gt(t,e);return{server:i,client:r,auto:"client"===zt(t)?r:i,"client-multipart":s,none:{renderAndAttachScreenshot:()=>Promise.resolve()}}})(t,this.sp)}}class Et{constructor(t,e){this.wrapped=t,this.reporter=e,this.submit=(t,e)=>new Promise(function(i,r){var s=function(t){try{throw this.reporter.report(t),t}catch(e){return r(e)}}.bind(this);try{return Promise.resolve(this.wrapped.submit(t,e)).then(i,s)}catch(n){s(n)}}.bind(this))}}class $t{constructor(t,e,i,r){this.fetchProvider=t,this.sp=e,this.renderer=i,this.windowMetaProvider=r}submit(t,e){return new Promise(function(i,r){let s,n,o,c,h,u,l,f,d,b,v,p,m;return({configId:s,payload:n,screenMeta:o,screenshot:c}=t),void 0===e&&(e="https://api.appzi.io/api"),h=this.sp.settings(),u=Ct(h?.data),l=[...u,...n],f=this.windowMetaProvider.getWindowMeta(),d=o?a(a({},f),{},{screen:o}):f,b={meta:d,data:l},Promise.resolve(this.fetchProvider.fetch(e+"/collect/"+s,{method:"post",body:JSON.stringify(b)})).then(function(t){try{return v=t,Promise.resolve(v.text()).then(function(t){try{if(p=t,m=p.replace(/"/g,""),"none"===c)return i(m);var s=function(){try{return i(m)}catch(t){return r(t)}},n=function(){try{return s()}catch(t){return r(t)}};try{return Promise.resolve(this.renderer.renderAndAttachScreenshot(m,{screen:d.screen,strategy:c},e)).then((function(){try{return s()}catch(t){return n()}}),n)}catch(o){n()}}catch(h){return r(h)}}.bind(this),r)}catch(s){return r(s)}}.bind(this),r)}.bind(this))}}const Tt=["boolean","number","string","date"],Ct=t=>{try{if(!t)return[];if("object"!==(0,pt.O)(t))return[];const e=[],i=[];return Object.keys(t).forEach((r=>{const s=((t,e)=>{const i=t.toLowerCase().replace(/[^a-z0-9]/gi,"");if(/\d/.test(i[0]))return"_"+i;const r=i||"_";let s=2,n=r;for(;e.includes(n);)n=r+s,s++;return n})(r,i),n=s===r?void 0:r;i.push(s);const o=(t=>{const e=(0,pt.O)(t);if("object"===e){const e=t.value,i=(0,pt.O)(e);if(Tt.includes(i))return{value:e,label:"string"===(0,pt.O)(t.label)?t.label:void 0}}if(Tt.includes(e))return{value:t}})(t[r]);o&&e.push({_t:"js",blockId:s,value:o.value,label:o.label??n})})),e}catch(e){return[]}};class Lt{constructor(t){this.bw=t}getWindowMeta(){const t=this.bw.win;return{screen:G(this.bw),origin:t.location.href,language:t.navigator.languages?.join(", ")??t.navigator.language??t.navigator.userLanguage}}}var Dt=t(10),Rt=t(4),Ft=t(3);const Nt=(0,Ft.x)("wt-1st-view",(0,Rt.x)()),Wt=(0,Ft.x)("wt-nth-view",(0,Rt.x)()),Mt=(0,Ft.x)("wt-start",(0,Rt.x)()),Jt=(0,Ft.x)("wt-sc",(0,Rt.x)());class Bt{constructor(t,e){void 0===e&&(e="https://api.appzi.io/api"),this.vt=t,this.bt=void 0,this.reportDuration=(t,e,i)=>this.yt(`${t}/elapsed/${e}`,i),this.reportEvent=(t,e)=>this.yt(`${t}/inc/${e}`),this.yt=(t,e)=>{const i={method:"POST",headers:{"Content-Type":"application/json"}};return void 0!==e&&(i.body=JSON.stringify(e)),this.vt.fetch(`${this.bt}/${t}`,i)},this.bt=`${e}/tele`}}var Ht=t(20);const qt=(0,at._)(),Kt=(t,e)=>{let i=t.ready;Object.defineProperty(t,"ready",{set:t=>{i=t,t(e)},get:()=>i,enumerable:!1})},Ut=864e5,Vt=t=>{let{lastAttempt:e,attempts:i,opts:r,now:s}=t;switch(r._t){case"never":return{state:0===i?"ready":"disabled"};case"times":return i<=r.times?Zt(e,r.cooldownDays,s):{state:"disabled"};case"forever":return Zt(e,r.cooldownDays,s)}},Zt=(t,e,i)=>{if(!t)return{state:"ready"};const r=((t,e,i)=>{if(!t)return i;const r=new Date(t);return isNaN(r.valueOf())?new Date:new Date(r.getTime()+e*Ut)})(t,e,i);return i>=r?{state:"ready"}:{state:"cooldown",allowAfter:r}},Yt=(t,e)=>"ready"===t.state?t:d(d({},t),{},{bannedBy:e});class Gt{constructor(t,e,i,r,s){this.id=t,this.Ot=e,this.Pt=i,this.St=r,this.kt=s,this.It=t=>new Promise(function(e,i){let r,s,n;return Promise.resolve(this.St.getLastRun(this.id)).then(function(o){try{return r=o,s=this.kt.now(),n=((t,e,i)=>{if(!t)return{canRunNow:!0};const r=((t,e,i)=>{let{attempts:r,lastSubmit:s,lastPop:n,submits:o}=t;const{dismiss:c,submit:h}=e,u=Yt(Vt({attempts:o,lastAttempt:s,opts:h,now:i}),"submit");return"ready"!==u.state?u:Yt(Vt({attempts:r,lastAttempt:n,opts:c,now:i}),"dismiss")})(t,this.Pt,i);return"ready"===r.state?{canRunNow:!0}:{canRunNow:!1,bannedBy:r.bannedBy}})(r,0,s),!1===n.canRunNow||t(),e()}catch(c){return i(c)}}.bind(this),i)}.bind(this))}run(t){const e=setTimeout((()=>{this.It(t)}),1e3*this.Ot.delaySeconds);return{cancel:()=>{clearTimeout(e)}}}}const Qt={cancel:()=>{}};class Xt{constructor(t,e){this.zt=t,this.At=e,this.run=t=>{let e=Qt,i=C.l;const r=this.zt.run((()=>{e=this.At().run((()=>{i(),t()}))}));return i=()=>{r.cancel(),e.cancel()},{cancel:i}}}}class te{constructor(t,e){this.bw=t,this.timer=e,this.Et=null,this.$t=null,this.Tt=(0,Q.uK)(),this.run=t=>{const e=this.timer(200);return e.tick$.subscribe(this.Ct),this.bw.doc.addEventListener("mousemove",this.Lt),this.Tt.subscribe(t),{cancel:()=>{this.bw.doc.removeEventListener("mousemove",this.Lt),e.stop()}}},this.Lt=t=>{this.$t=t},this.Ct=()=>{const t=this.Et,e=this.$t;this.Et=this.$t,t&&e&&t.clientY-e.clientY>this.bw.win.innerHeight/6&&e.clientY<this.bw.win.innerHeight/10&&this.Tt.next()}}}const ee=t=>{const e=(0,Q.uK)(),i=setInterval((()=>{e.next()}),t);return{tick$:e,stop:()=>{clearInterval(i)}}};class ie{constructor(t,e){this.bw=t,this.timer=e,this.Dt=-1,this.Rt=-1,this.Tt=(0,Q.uK)(),this.run=t=>{const e=this.timer(200);return e.tick$.subscribe(this.Ct),this.bw.doc.addEventListener("scroll",this.Ft),this.Tt.subscribe(t),{cancel:()=>{this.bw.doc.removeEventListener("scroll",this.Ft),e.stop()}}},this.Ft=()=>{this.Rt=this.bw.win.scrollY},this.Ct=()=>{const t=this.Dt,e=this.Rt;if(this.Dt=this.Rt,t<=-1||e<=-1)return;const i=t-e;i>56&&i<168&&this.Tt.next()}}}class re{constructor(t,e,i){this.Nt=t,this.kt=e,this.Wt=i}create(t){return((t,e,i,r,s,n)=>{switch(e._t){case"top":return new Gt(t,e,i,s,n);case"exit":{const o=new Gt(t,{_t:"top",delaySeconds:e.delaySeconds},i,s,n);return new Xt(o,(t=>"desktop"===t.device()?()=>new te(Dt.y.default,ee):()=>new ie(Dt.y.default,ee))(r))}default:throw new Error("not supported: "+e._t)}})(t.id,t.trigger,t.retake,this.Wt,this.Nt,this.kt)}}const se=t=>!!t.launcher;class ne{constructor(t,e,i,r,s,n){this.Mt=t,this.Jt=e,this.Bt=i,this.appzi=r,this.Ht=s,this.qt={},this.Kt=new Set,this.Ut=void 0,this.open=t=>{this.Bt.getById(t)&&this.Vt({cfg:this.Bt.getById(t),mode:"pop"})},this.Zt=[],this.Vt=t=>{const{cfg:e,mode:i}=t;if(se(e)&&this.Yt(e.id),!this.Gt(i))return;this.Ht.reportAttempt(t);const r=this.appzi.create(t.cfg);this.Zt.includes(r)||(this.Qt(r,e.id),r.bridge.on(T.bL,(()=>{this.Ht.reportSubmit(t)})),this.Zt.push(r)),r.show()},this.Yt=t=>{if(this.Ut===t)return;const e=this.Ut;if(this.Ut=t,e&&this.Xt(e),t){const e=this.appzi.create(this.Bt.getById(t));this.Qt(e,t)}},this.Xt=t=>{this.qt[t].watch.unsubscribe(),delete this.qt[t],this.appzi.destroy(t)},this.Qt=(t,e)=>{const i=t.state$.subscribe((t=>t.isOpen?this.Kt.add(e):this.Kt.delete(e)));this.qt[e]={host:t,watch:i}},this.Yt=(0,at.Ks)(this.Yt,n)}start(){this.Mt.config$.subscribe((t=>{this.Yt(t)})),this.Jt.activateIntent$.subscribe((t=>{this.Vt(t)}))}Gt(t){switch(t){case"pop":return!0;case"pop-shy":return 0===this.Kt.size;default:return!1}}}class oe{set(t,e){oe.te[t]=e}get(t){return oe.te[t]}}oe.te={};class ce{constructor(t){this.w=t,this.ee=void 0,this.ee=this.w.localStorage}isSupported(){try{const t="__appzi-test__";return this.ee.setItem(t,t),this.ee.removeItem(t),!0}catch(t){return!1}}set(t,e){this.ee.setItem(t,JSON.stringify(e))}get(t){const e=this.ee.getItem(t);try{return e&&JSON.parse(e)}catch(i){return}}}class he{get storageProvider(){return(()=>{const t=new ce(this.window);return t.isSupported()?t:new oe})()}constructor(t){this.window=t}set(t,e){this.storageProvider.set(t,e)}get(t){return this.storageProvider.get(t)}}const ue=(t,e)=>!t.includes(e),ae=(t,e)=>{const i=t[2];switch(t[1]){case"contains":return e.includes(i);case"exact":return e.toLocaleLowerCase()===i.toLocaleLowerCase();case"regex":return new RegExp(i,"i").test(e);default:return!1}},le=(t,e)=>{switch(e[0]){case"data":return((t,e)=>{const[i,r]=e;switch(r){case"age-days":{const[i,r,s,n,o]=e,c=(t=>{switch((0,pt.O)(t)){case"date":return t;case"string":{const e=new Date(t);return isNaN(e)?void 0:e}default:return}})(t[s]);if(!c)return!1;const h=((new Date).getTime()-c.getTime())/Ut;return le({props:{v:h}},["data",n,"v",o])}case"eq":{const[i,r,s,n]=e;return t[s]==n}case"neq":{const[i,r,s,n]=e;return t[s]!=n}case"gt":{const[i,r,s,n]=e;return t[s]>n}case"lt":{const[i,r,s,n]=e;return t[s]<n}case"is-set":{const[i,r,s]=e;return!!t[s]}case"is-unset":{const[i,r,s]=e,n=t[s];return null==n||""===n}default:return!1}})(t.props,e);case"userId":return((t,e)=>{const[i,r]=e;return"exists"===r?!!t:!t})(t.userId,e);default:return!1}},fe=(t,e)=>{const{urlRules:i,jsVarRules:r}=(t=>{const e={jsVarRules:[],urlRules:[]};for(const i of t)"url"===i[0]?e.urlRules.push(i):e.jsVarRules.push(i);return e})(t),s=((t,e)=>{if(t.filter((t=>"not"===t[1])).find((t=>{let[i,r,s,n]=t;return ae([i,s,n],e)})))return!1;const i=t.filter((t=>"not"!==t[1]));return!i.length||!!i.find((t=>ae(t,e)))})(i,e.url);return s&&((t,e)=>!e.find((e=>!le(t,e))))(e.data,r)};class de{constructor(t,e,i){this.env=t,this.cache=e,this.config$=(0,Q.uK)(),this.activate=()=>{this.env.current$.subscribe(this.ie)},this.ie=t=>{const e=((t,e)=>this.cache.allManual.find((t=>ue(t.targeting.excludedDevices,e.device)&&fe(t.targeting.filter,e))))(0,t);this.config$.next(e?.id)},this.ie=(0,at.Ks)(this.ie,i)}}class be{constructor(t,e,i){this.re=t,this.se=e,this.ne=i,this.activateIntent$=(0,Q.uK)(),this.oe={},this.ce=[],this.he=Q.p4,this.activate=()=>{const t=this.re.current$.subscribe(this.ie);this.he=t},this.deactivate=()=>{this.he.unsubscribe(),this.ce.forEach((t=>{this.oe[t.id].cleanup(),delete this.oe[t.id]}))},this.ie=t=>{const e=((t,e)=>this.se.allAutomatic.filter((t=>ue(t.targeting.excludedDevices,e.device)&&fe(t.targeting.filter,e))))(0,t),i=this.ce.filter((t=>!e.find((e=>t.id===e.id))));this.ue(i);const r=e.filter((t=>!this.oe[t.id]));this.ae(r),this.ce=e}}ae(t){t.forEach((t=>{const e=((t,e)=>{let i=C.l;const r=(0,Q.uK)();return{activateIntent$:r,deactivate:()=>i(),run:()=>{const{cancel:s}=e.run((()=>{r.next({cfg:t,mode:"pop-shy"})}));i=()=>{s()}}}})(t,this.ne.create(t.targeting.autoTrigger)),i=e.activateIntent$.subscribe((t=>{this.activateIntent$.next(t)}));this.oe[t.id]={cleanup:()=>{i.unsubscribe(),e.deactivate()}},e.run()}))}ue(t){t.forEach((t=>{this.oe[t.id].cleanup(),delete this.oe[t.id]}))}}const ve=t=>{const e=t.settings().userId,i=e?e.toString():"";return i.length&&i.length<50?i:void 0},pe=(t,e)=>({configId:t.id,ruleId:t.targeting.autoTrigger.id,userId:e});class me{constructor(t,e,i){void 0===i&&(i="https://api.appzi.io/api"),this.win=t,this.sp=e,this.endpoint=i,this.le=(t,e)=>this.win.fetch(`${this.endpoint}/auto-pop/${t}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})}getLastRun(t){return new Promise(function(e,i){let r,s,n;return r=ve(this.sp),r?Promise.resolve(this.win.fetch(`${this.endpoint}/auto-pop?userId=${encodeURIComponent(r)}&ruleId=${encodeURIComponent(t)}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}})).then((function(t){try{return s=t,Promise.resolve(new Promise((function(t,e){return 200===s.status?Promise.resolve(s.json()).then(t,e):t(void 0)}))).then((function(t){try{return n=t,e(n)}catch(r){return i(r)}}),i)}catch(r){return i(r)}}),i):e(void 0)}.bind(this))}reportAttempt(t){return new Promise(function(e,i){let r,s,n;return r=ve(this.sp),r?(({cfg:s}=t),n=pe(s,r),Promise.resolve(this.le("attempt",n)).then((function(){try{return e()}catch(t){return i(t)}}),i)):e()}.bind(this))}reportSubmit(t){return new Promise(function(e,i){let r,s,n;return({cfg:r}=t),s=ve(this.sp),s?(n=pe(r,s),Promise.resolve(this.le("taken",n)).then((function(){try{return e()}catch(t){return i(t)}}),i)):e()}.bind(this))}}const we={now:()=>new Date},ye=(t,e)=>`azat${e??""}-${t}`;class je{constructor(t,e,i){void 0===i&&(i=we),this.persistenceSvc=t,this.sp=e,this.kt=i,this.fe=()=>this.sp.settings().userId,this.de=t=>new Promise(function(e,i){let r,s,n,o,c;return r=((t,e)=>ye(t.cfg.targeting.autoTrigger.id,e))(t,this.fe()),Promise.resolve(this.getLastRun(t.cfg.targeting.autoTrigger.id)).then(function(h){try{return s=h,({submits:n,attempts:o,lastSubmit:c}=s??{}),e({run:{configId:t.cfg.id,ruleId:t.cfg.targeting.autoTrigger.id,lastSubmit:c,lastPop:this.kt.now(),submits:n??0,attempts:o??0},key:r})}catch(u){return i(u)}}.bind(this),i)}.bind(this)),this.reportAttempt=t=>new Promise(function(e,i){let r,s,n;return Promise.resolve(this.de(t)).then(function(t){try{return({run:r}=t),s=r.attempts+1,n=p(p({},r),{},{attempts:s,lastPop:this.kt.now(),v:2}),this.persistenceSvc.set(ye(n.ruleId,this.fe()),n),e()}catch(o){return i(o)}}.bind(this),i)}.bind(this)),this.reportSubmit=t=>new Promise(function(e,i){let r,s,n;return Promise.resolve(this.de(t)).then(function(t){try{return({run:r,key:s}=t),n=p(p({},r),{},{lastSubmit:this.kt.now(),submits:r.submits+1,attempts:0,lastPop:this.kt.now(),v:2}),this.persistenceSvc.set(s,n),e()}catch(o){return i(o)}}.bind(this),i)}.bind(this))}getLastRun(t){return new Promise(function(e){var i;return e((i=this.persistenceSvc.get(ye(t,this.fe())))?2===i.v?i:{configId:i.configId,lastPop:i.lastPop,ruleId:i.ruleId,submits:i.didSubmit?1:0,v:2,lastSubmit:i.didSubmit?i.lastPop:void 0,attempts:1}:i)}.bind(this))}saveRun(t,e){const i=p(p({},e),{},{v:2});this.persistenceSvc.set(ye(t,this.fe()),i)}}const ge=t=>"pop-shy"===t.mode;class Oe{constructor(t,e){this.be=t,this.ve=e,this.getLastRun=t=>new Promise(function(e,i){let r,s;return Promise.resolve(this.ve.getLastRun(t)).then(function(n){try{return r=n,r?(this.be.saveRun(t,r),e(r)):Promise.resolve(this.be.getLastRun(t)).then((function(t){try{return s=t,e(s)}catch(r){return i(r)}}),i)}catch(o){return i(o)}}.bind(this),i)}.bind(this)),this.reportAttempt=t=>new Promise(function(e,i){return ge(t)?Promise.resolve(this.be.reportAttempt(t)).then(function(){try{return Promise.resolve(this.ve.reportAttempt(t)).then((function(){try{return e()}catch(t){return i(t)}}),i)}catch(r){return i(r)}}.bind(this),i):e()}.bind(this)),this.reportSubmit=t=>new Promise(function(e,i){return ge(t)?Promise.resolve(this.be.reportSubmit(t)).then(function(){try{return Promise.resolve(this.ve.reportSubmit(t)).then((function(){try{return e()}catch(t){return i(t)}}),i)}catch(r){return i(r)}}.bind(this),i):e()}.bind(this))}}class Pe{constructor(t){this.triggers=t,this.activateIntent$=(0,Q.uK)(),this.pe=[],this.activate=()=>{this.triggers.forEach((t=>{this.pe.push(t.activateIntent$.subscribe((t=>{this.activateIntent$.next(t)}))),t.activate()}))},this.deactivate=()=>{this.pe.forEach((t=>{t.unsubscribe()})),this.triggers.forEach((t=>{t.deactivate()}))}}}const Se="data-az-l";class ke{constructor(t,e){this.doc=t,this.configCache=e,this.activateIntent$=(0,Q.uK)(),this.activate=()=>{this.doc.addEventListener("click",this.me)},this.deactivate=()=>{this.doc.removeEventListener("click",this.me)},this.me=t=>{let e=t.target;for(;e;){if(e.hasAttribute(Se)){const i=e.getAttribute(Se);i&&(this.activateIntent$.next({cfg:this.configCache.getById(i),mode:"pop"}),t.stopPropagation(),t.preventDefault())}e=e.parentElement}}}}let Ie=function(t){return t[t.VeryImportant=5]="VeryImportant",t[t.Important=4]="Important",t[t.Medium=3]="Medium",t[t.Low=2]="Low",t[t.Lowest=1]="Lowest",t}({});const ze=t=>{let{excludedDevices:e,filter:i}=t;const r=i.filter((t=>"url"===t[0])),s=r.filter((t=>"not"===t[1])),n=r.filter((t=>"not"!==t[1])),o=i.filter((t=>"data"===t[0]||"userId"===t[0])),c=n.length||s.length,h=!!e.length,u=[c&&h&&Ie.Important,o.length&&Ie.Important,h&&Ie.Medium,c&&Ie.Low,Ie.Lowest].filter(Boolean);return Math.max(...u)},xe={excludedDevices:[],filter:[]},Ae=t=>y(y({},t),{},{targeting:t.targeting??xe,weight:ze(t.targeting??xe)}),_e=(t,e)=>t.weight===e.weight?0:t.weight>e.weight?-1:1,Ee=t=>!!t.targeting.autoTrigger;class $e{constructor(){this.we=[],this.ye=[],this.je=[]}get allManual(){return this.ye}get allAutomatic(){return this.je}getById(t){return this.we.find((e=>e.id===t))}push(t){const e=t.map(Ae);this.we=[...this.we,...e].sort(_e),this.ye=this.we.filter(se),this.je=this.we.filter(Ee)}}class Te{constructor(t){this.ge=void 0,this.device=()=>this.mobile()?"mobile":this.tablet()?"tablet":"desktop",this.mobile=()=>this.Oe()||this.Pe()||this.Se()||this.ke()||this.Ie(),this.tablet=()=>this.ze()||this.xe()||this.Ae()||this._e(),this.Pe=()=>!this.Ee()&&this.find("iphone"),this.Se=()=>this.find("ipod"),this.ze=()=>this.find("ipad"),this.$e=()=>!this.Ee()&&this.find("android"),this.Oe=()=>this.$e()&&this.find("mobile"),this.xe=()=>this.$e()&&!this.find("mobile"),this.Te=()=>this.find("blackberry")||this.find("bb10")||this.find("rim"),this.Ie=()=>this.Te()&&!this.find("tablet"),this.Ae=()=>this.Te()&&this.find("tablet"),this.Ee=()=>this.find("windows"),this.ke=()=>this.Ee()&&this.find("phone"),this._e=()=>this.Ee()&&this.find("touch")&&!this.ke(),this.find=t=>this.ge.includes(t),this.ge=t.toLowerCase()}}const Ce={data:{props:{}},device:"desktop",url:""};class Le{constructor(t,e){this.current$=(0,Q.uK)(),this.Ce=Ce,this.Le=void 0,this.De=t=>{this.Ce=O(O({},this.Ce),t),cancelAnimationFrame(this.Le),this.Le=requestAnimationFrame(this.Re)},this.Re=()=>{this.current$.next(this.Ce)},t.current$.subscribe((t=>{this.De(t)})),e.current$.subscribe((t=>{this.De({data:t})}))}}class De{constructor(t,e){this.sp=t,this.wt=e,this.current$=(0,Q.uK)(),this.gt=Ce.data,this.jt=()=>{const t={userId:(e=this.sp.settings()).userId,props:(i=e.data,void 0===i&&(i={}),Object.entries(i).reduce(((t,e)=>{let[i,r]=e;return k(k({},t),{},{[i]:(s=r,"object"===(0,pt.O)(s)?s.value:s)});var s}),{}))};var e,i,r,s;((r=this.gt).userId!==(s=t).userId||function(t,e){const i=Object.entries(t),r=Object.entries(e);if(i.length!==r.length)return!0;for(let s=0;s<i.length;s++)if(i[s][1]!==r[s][1])return!0;return!1}(r.props,s.props))&&(this.gt=t,this.current$.next(t))}}start(){this.jt(),setInterval((()=>{this.jt()}),this.wt)}}class Re{constructor(t,e){this.win=t,this.current$=(0,Q.uK)(),this.Fe=void 0,this.Ne=void 0,this.We=void 0,this.Me=()=>{const t=this.win.location.href;this.Fe!==t&&(this.Fe=t,this.current$.next({device:this.We,url:t}))},this.Ne=e;const i=new Te(t.navigator.userAgent);this.We=i.device()}start(){this.Me(),setInterval(this.Me,this.Ne)}}const Fe=Dt.y.default,Ne=Fe.win,We=function(t,e,i,r){void 0===e&&(e=ft(t.win)),void 0===r&&(r=(0,ut.D)(t.win));const s=((t,e)=>{const i=new $t(t.win,e,new _t(t,e),new Lt(t));return new Et(i,(0,ut.D)(t.win))})(t,e),n=new ht(t,s);return(0,at.cK)(n,r,[...Object.keys(n)]),n}(Fe),Me=Ne[Ht.RF]??[],Je=ft(Ne);delete Ne[Ht.RF],Me.length&&((t,e,i,r,s)=>{const{hostDataWatcher:n,envWatcher:o,start:c}=function(t,e){void 0===e&&(e=ft(t));const i=function(t,e){return void 0===e&&(e=1e3),new De(t,e)}(e),r=function(t,e){return void 0===e&&(e=100),new Re(t,e)}(t);return{hostDataWatcher:i,envWatcher:new Le(r,i),start:()=>{i.start(),r.start()}}}(t.win,i),{start:h,swapper:u}=((t,e,i,r,s,n)=>{const{win:o,doc:c}=t,h=new $e;(0,at.cK)(h,n,["getById","push"]),h.push(r);const u=new Oe(new je(new he(o),i),new me(o,i)),a=new re(u,we,new Te(o.navigator.userAgent));(0,at.cK)(a,n);const l=new de(s,h,n),f=new Pe([(0,at.cK)(new be(s,h,a),n),new ke(c,h)]);(0,at.cK)(f,n);const d=new ne(l,f,h,e,u,n);return{start:()=>{d.start(),f.activate(),l.activate()},swapper:d}})(t,e,i,r,o,s);((t,e)=>{const i=[];let r={props:{}};t.hosts$.subscribe((t=>{const e=t.bridge;i.push(e),e.post((0,T.gj)({data:r.props})),e.on(T.cV,(()=>{e.post((0,T.gj)({data:r.props}))}))})),e.current$.subscribe((t=>{r=t,i.forEach((e=>{e.post((0,T.gj)({data:t.props}))}))}))})(e,n),((t,e)=>{t[$]=e})(e,u),h(),c()})(Fe,We,Je,Me,(0,ut.D)(Ne)),((t,e)=>{const i=t.win;i.appzi=e,/iPad|iPhone|iPod/.test(t.win.navigator.userAgent)&&t.doc.body.classList.add("appzi-is-ios");try{let t=i.appziSettings;if(i.appziSettings){const t=i.appziSettings.ready;t?t(e):Kt(i.appziSettings,e)}Object.defineProperty(i,"appziSettings",{set:i=>{t=i,t&&(t.ready?t.ready(e):Kt(t,e))},get:()=>t})}catch(o){}var r,s,n;(i[Ht.et]??[]).forEach((t=>qt(t)(e))),s=e.bridge,n=new Bt(i),s.on(Nt,(t=>{let{surveyId:e}=t;return n.reportEvent(e,"open")})),s.on(Mt,(t=>{let{surveyId:e}=t;return n.reportEvent(e,"start")})),s.on(Jt,(t=>{let{surveyId:e,durationMs:i}=t;n.reportEvent(e,"complete"),n.reportDuration(e,"complete",i)})),r=i,e.bridge.on(Wt,(t=>{let{surveyId:e}=t;const i=r.appziSettings?.onEvent||C.l;try{i({surveyId:e,type:"open-survey"})}catch(o){}}))})(Fe,We)})();